<% content_for :title, "Entries - #{@account.name}" %>

<section class="w-full">
  <header class="mb-6">
    <h1 class="text-2xl font-bold text-gray-900">
      Entries - 
      <%= link_to @account.name, entity_account_path(@account.entity_id, @account), class: "text-blue-600 hover:text-blue-800" %>
    </h1>
  </header>

  <% if @entries %>
    <div class="bg-white shadow-sm rounded-lg overflow-hidden">
      <div class="overflow-x-auto">
        <table class="min-w-full divide-y divide-gray-200">
          <thead class="bg-gray-50">
            <tr>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-16">ID</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                Date
                <% if params[:order] == 'desc' %>
                  <%= link_to entity_account_entries_path(@entity, @account, order: 'asc'), class: "inline-block ml-1" do %>
                    <span class="text-gray-400 hover:text-gray-600">↑</span>
                  <% end %>
                <% else %>
                  <%= link_to entity_account_entries_path(@entity, @account, order: 'desc'), class: "inline-block ml-1" do %>
                    <span class="text-gray-400 hover:text-gray-600">↓</span>
                  <% end %>
                <% end %>
              </th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Transaction</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Entry</th>
              <th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Amount</th>
              <th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Balance</th>
            </tr>
          </thead>
          <tbody class="bg-white divide-y divide-gray-200">
            <% @entries.each do |entry| %>
              <tr class="hover:bg-gray-50">
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-mono">
                  <%= entry.id %>
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                  <%= entry.transaction_new.date.strftime("%m/%d/%Y") %>
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                  <%= link_to entry.transaction_new.description, entity_transaction_path(@entity, entry.transaction_new), class: "text-blue-600 hover:text-blue-800" %>
                </td>
                <td class="px-6 py-4 text-sm text-gray-900">
                  <%= entry.description %>
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right font-mono">
                  <%= number_to_currency(entry.amount) %>
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right font-mono">
                  <%= number_to_currency(entry.balance) %>
                </td>
              </tr>
            <% end %>
          </tbody>
        </table>
      </div>
    </div>

    <div class="mt-6">
      <%= render 'shared/pagination', pagy: @pagy %>
    </div>
  <% else %>
    <div class="text-center py-12">
      <p class="text-gray-500 text-lg">No entries found for this account.</p>
    </div>
  <% end %>
</section>
